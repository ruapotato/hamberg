[gd_scene load_steps=9 format=3 uid="uid://custom_terrain_world"]

[ext_resource type="Script" path="res://shared/custom_terrain/terrain_world.gd" id="1"]
[ext_resource type="Script" path="res://shared/day_night_cycle.gd" id="2"]
[ext_resource type="Shader" path="res://shared/custom_terrain/night_sky.gdshader" id="3"]
[ext_resource type="Script" path="res://shared/weather_manager.gd" id="4"]

[sub_resource type="ShaderMaterial" id="SkyShaderMaterial_1"]
shader = ExtResource("3")
shader_parameter/sky_top_color = Vector3(0.3, 0.5, 0.9)
shader_parameter/sky_horizon_color = Vector3(0.55, 0.7, 0.9)
shader_parameter/ground_color = Vector3(0.2, 0.2, 0.2)
shader_parameter/sun_color = Vector3(1.0, 0.95, 0.8)
shader_parameter/sun_size = 0.04
shader_parameter/star_brightness = 0.0
shader_parameter/star_density = 0.5
shader_parameter/cloud_coverage = 0.0
shader_parameter/cloud_darkness = 0.0
shader_parameter/cloud_speed = 0.04

[sub_resource type="Sky" id="Sky_1"]
sky_material = SubResource("SkyShaderMaterial_1")

[sub_resource type="Environment" id="Environment_1"]
background_mode = 2
sky = SubResource("Sky_1")
ambient_light_source = 3
ambient_light_color = Color(0.6, 0.7, 0.8, 1)
ambient_light_energy = 0.3
ambient_light_sky_contribution = 0.5
reflected_light_source = 2
glow_enabled = true
fog_enabled = false
fog_light_color = Color(0.7, 0.8, 0.9, 1)
fog_density = 0.0
fog_aerial_perspective = 0.0
fog_sky_affect = 0.0
volumetric_fog_enabled = true
volumetric_fog_density = 0.008
volumetric_fog_albedo = Color(0.55, 0.7, 0.9, 1)
volumetric_fog_emission = Color(0.55, 0.7, 0.9, 1)
volumetric_fog_emission_energy = 2.0
volumetric_fog_length = 100.0
volumetric_fog_detail_spread = 0.5
volumetric_fog_sky_affect = 1.0

[sub_resource type="StandardMaterial3D" id="DefaultTerrainMaterial"]
albedo_color = Color(0.3, 0.6, 0.2, 1)
roughness = 0.9

[node name="TerrainWorld" type="Node3D"]
script = ExtResource("1")
terrain_material = SubResource("DefaultTerrainMaterial")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, -0.75, 0.433013, 0, 50, 0)
light_energy = 1.2
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_1")

[node name="DayNightCycle" type="Node" parent="."]
script = ExtResource("2")
day_length_minutes = 20.0
start_hour = 8.0

[node name="WeatherManager" type="Node" parent="."]
script = ExtResource("4")
